<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSSPlus Manager Platform</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- Icon Library (Lucide) -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <!-- Animation Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <!-- Charting Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fc;
        }
        .card {
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
        .btn-primary {
            background-color: #0d6efd;
            box-shadow: 0 4px 6px -1px rgba(13, 110, 253, 0.3), 0 2px 4px -2px rgba(13, 110, 253, 0.2);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #0b5ed7;
        }
        .modal {
            background-color: rgba(0, 0, 0, 0.5);
        }
        .tag {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- Supabase Configuration Warning -->
    <div id="config-warning" class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4" role="alert" style="display:none;">
        <p class="font-bold">Supabase Configuration Required</p>
        <p>Please update **SUPABASE_URL** and **SUPABASE_ANON_KEY** in the script section to connect to your database.</p>
    </div>

    <!-- Header / Navigation -->
    <header class="bg-white border-b border-gray-200 shadow-sm sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-extrabold text-[#0d6efd]">BSSPlus</span>
                    <span class="text-xl font-light text-gray-500 ml-1">Manager</span>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <a href="#" class="text-gray-600 hover:text-[#0d6efd] font-medium transition duration-150">Dashboard</a>
                    <a href="#" class="text-gray-400 hover:text-gray-600 transition duration-150">Analytics</a>
                    <a href="#" class="text-gray-400 hover:text-gray-600 transition duration-150">Settings</a>
                </nav>
                <div class="flex items-center space-x-3">
                    <button onclick="platform.logout()" class="text-sm font-medium text-gray-600 hover:text-red-500 transition duration-150 p-2 rounded-full hover:bg-gray-100">
                        <i data-lucide="log-out" class="w-5 h-5"></i>
                    </button>
                    <!-- User Profile/Avatar Placeholder -->
                    <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center text-gray-600 font-semibold text-sm">
                        AD
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
        <div class="flex justify-between items-center mb-8">
            <h1 class="text-3xl font-bold text-gray-900 animate-slide-in">
                Content Management Dashboard
            </h1>
            <button onclick="openAddModal()"
                    class="btn-primary text-white flex items-center space-x-2 px-4 py-2 rounded-lg font-medium hover:scale-[1.02] transition-transform shadow-lg shadow-blue-300/50">
                <i data-lucide="plus" class="w-5 h-5"></i>
                <span>New Post</span>
            </button>
        </div>

        <!-- Stats Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
            <!-- Total Posts Card -->
            <div class="card p-6 flex items-center justify-between border-b-4 border-blue-500">
                <div>
                    <p class="text-sm font-medium text-gray-500">Total Posts</p>
                    <p id="stat-total-posts" class="text-3xl font-extrabold text-gray-900 mt-1">0</p>
                </div>
                <i data-lucide="layers" class="w-8 h-8 text-blue-500 opacity-70"></i>
            </div>
            <!-- Average Length Card -->
            <div class="card p-6 flex items-center justify-between border-b-4 border-green-500">
                <div>
                    <p class="text-sm font-medium text-gray-500">Avg. Word Count</p>
                    <p id="stat-avg-words" class="text-3xl font-extrabold text-gray-900 mt-1">0</p>
                </div>
                <i data-lucide="pen-tool" class="w-8 h-8 text-green-500 opacity-70"></i>
            </div>
            <!-- Unique Tags Card -->
            <div class="card p-6 flex items-center justify-between border-b-4 border-yellow-500">
                <div>
                    <p class="text-sm font-medium text-gray-500">Unique Tags</p>
                    <p id="stat-unique-tags" class="text-3xl font-extrabold text-gray-900 mt-1">0</p>
                </div>
                <i data-lucide="tags" class="w-8 h-8 text-yellow-500 opacity-70"></i>
            </div>
            <!-- Drafts Card -->
            <div class="card p-6 flex items-center justify-between border-b-4 border-red-500">
                <div>
                    <p class="text-sm font-medium text-gray-500">Drafts</p>
                    <p id="stat-drafts" class="text-3xl font-extrabold text-gray-900 mt-1">0</p>
                </div>
                <i data-lucide="clipboard-list" class="w-8 h-8 text-red-500 opacity-70"></i>
            </div>
        </div>

        <!-- Visualization/Chart Area -->
        <div class="card p-6 mb-12">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Post Tag Distribution</h2>
            <div id="tag-chart" class="w-full h-80"></div>
        </div>

        <!-- Filter and Search -->
        <div class="card p-4 flex flex-wrap gap-4 items-center justify-between mb-8">
            <div class="flex-grow max-w-lg">
                <div class="relative">
                    <i data-lucide="search" class="w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    <input type="text" id="search-input" onkeyup="platform.filterPosts()"
                           placeholder="Search by title or content..."
                           class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition">
                </div>
            </div>
            <div class="flex items-center space-x-3">
                <button onclick="clearFilters()" id="clear-filters-btn" disabled
                        class="text-sm px-3 py-2 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 disabled:opacity-50 transition">
                    Clear Filters
                </button>
                <select id="sort-select" onchange="platform.filterPosts()"
                        class="px-3 py-2 border border-gray-300 rounded-lg text-gray-700 focus:ring-blue-500 focus:border-blue-500 transition">
                    <option value="date-desc">Newest First</option>
                    <option value="date-asc">Oldest First</option>
                    <option value="title-asc">Title (A-Z)</option>
                </select>
            </div>
        </div>

        <!-- Posts List -->
        <h2 class="text-2xl font-semibold text-gray-800 mb-4">Content Feed</h2>
        <div id="posts-list" class="space-y-4">
            <!-- Posts will be injected here by JavaScript -->
            <p id="loading-message" class="text-center text-gray-500 p-8">Loading posts from Supabase...</p>
        </div>
        
        <div id="no-results" class="hidden text-center text-gray-500 p-8 card mt-8">
            <i data-lucide="folder-x" class="w-12 h-12 mx-auto mb-4 text-gray-400"></i>
            <p class="text-xl font-medium">No results found.</p>
            <p class="text-sm mt-1">Try adjusting your search or filters.</p>
        </div>
    </main>

    <!-- Post Add/Edit Modal -->
    <div id="post-modal" class="modal fixed inset-0 z-50 flex items-center justify-center hidden opacity-0 transition-opacity duration-300">
        <div class="card w-full max-w-xl mx-4 p-6 md:p-8 transform translate-y-2 scale-95 transition-all duration-300">
            <h2 id="modal-title" class="text-2xl font-bold text-gray-900 mb-6">Add New Post</h2>
            <form id="post-form">
                <input type="hidden" id="post-id">
                <div class="mb-4">
                    <label for="post-title" class="block text-sm font-medium text-gray-700 mb-2">Title <span class="text-red-500">*</span></label>
                    <input type="text" id="post-title" required
                           placeholder="Enter a descriptive title"
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                </div>
                <div class="mb-4">
                    <label for="post-content" class="block text-sm font-medium text-gray-700 mb-2">Content <span class="text-red-500">*</span></label>
                    <textarea id="post-content" required rows="6"
                              placeholder="Write the full content of your article here..."
                              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-y transition"></textarea>
                </div>
                <div class="mb-6">
                    <label for="post-tags" class="block text-sm font-medium text-gray-700 mb-2">Tags (comma-separated)</label>
                    <input type="text" id="post-tags"
                           placeholder="e.g., business, consulting, digital transformation"
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                </div>
                <div class="flex justify-end space-x-3 pt-4">
                    <button type="button" onclick="closeModal()"
                            class="px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-100 transition">
                        Cancel
                    </button>
                    <button type="submit" id="save-post-btn"
                            class="btn-primary text-white px-6 py-2 rounded-lg font-medium hover:scale-105 transition-transform">
                        Save Post
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification-container" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center">
                <p class="text-gray-600">&copy; 2024 BSSPlus - Building Solid Success. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Supabase Configuration - **MUST BE UPDATED**
        const SUPABASE_URL = 'YOUR_SUPABASE_URL_HERE'; // Replace with your project URL
        const SUPABASE_ANON_KEY = 'YOUR_SUPABASE_ANON_KEY_HERE'; // Replace with your public anonymous key

        // Initialize Supabase Client
        let supabaseClient;
        try {
            if (SUPABASE_URL.includes('YOUR_SUPABASE_URL') || SUPABASE_ANON_KEY.includes('YOUR_SUPABASE_ANON_KEY')) {
                throw new Error("Supabase credentials not configured.");
            }
            supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        } catch (error) {
            console.error("Supabase Initialization Error:", error.message);
            document.getElementById('config-warning').style.display = 'block';
        }


        // BSSPlus Platform Main JavaScript
        class BSSPlusPlatform {
            constructor() {
                this.posts = [];
                this.currentEditId = null;
                this.init();
            }

            init() {
                this.checkConfiguration();
                this.setupEventListeners();
                this.renderPosts();
                this.listenForRealtimeUpdates(); // Setup real-time listener
            }

            checkConfiguration() {
                if (!supabaseClient) {
                    this.showNotification("Supabase is not configured. Data persistence will not work.", 'error');
                }
            }

            // --- Supabase Data Operations ---

            async fetchPosts() {
                if (!supabaseClient) return [];
                const { data, error } = await supabaseClient
                    .from('posts')
                    .select('id, title, content, tags, created_at');

                if (error) {
                    console.error('Error fetching posts:', error);
                    this.showNotification(`Error loading posts: ${error.message}`, 'error');
                    return [];
                }
                
                // Ensure tags is treated as an array and content is clean
                return data.map(post => ({
                    ...post,
                    tags: post.tags ? post.tags.split(',').map(t => t.trim()).filter(t => t) : [],
                    wordCount: this.getWordCount(post.content || '')
                }));
            }

            async createPost(data) {
                if (!supabaseClient) return;
                const { error } = await supabaseClient.from('posts').insert([data]);
                if (error) {
                    console.error('Error creating post:', error);
                    this.showNotification(`Error creating post: ${error.message}`, 'error');
                } else {
                    this.showNotification('Post successfully created!', 'success');
                    this.closeModal();
                }
            }

            async updatePost(id, data) {
                if (!supabaseClient) return;
                const { error } = await supabaseClient.from('posts').update(data).eq('id', id);
                if (error) {
                    console.error('Error updating post:', error);
                    this.showNotification(`Error updating post: ${error.message}`, 'error');
                } else {
                    this.showNotification('Post successfully updated!', 'success');
                    this.closeModal();
                }
            }

            async deletePost(id) {
                if (!supabaseClient) return;
                if (!confirm("Are you sure you want to delete this post?")) return;

                const { error } = await supabaseClient.from('posts').delete().eq('id', id);
                if (error) {
                    console.error('Error deleting post:', error);
                    this.showNotification(`Error deleting post: ${error.message}`, 'error');
                } else {
                    this.showNotification('Post successfully deleted.', 'info');
                }
            }

            listenForRealtimeUpdates() {
                if (!supabaseClient) return;
                supabaseClient
                    .channel('schema-db-changes')
                    .on(
                        'postgres_changes',
                        { event: '*', schema: 'public', table: 'posts' },
                        (payload) => {
                            console.log('Realtime change received!', payload);
                            // Re-fetch and re-render the whole list for simplicity
                            this.renderPosts();
                            if (payload.eventType === 'INSERT') {
                                this.showNotification("New post added by collaborator!", 'info');
                            }
                        }
                    )
                    .subscribe();
            }

            // --- UI/Rendering Logic ---

            async renderPosts() {
                document.getElementById('loading-message').style.display = 'block';
                const postsListEl = document.getElementById('posts-list');
                const searchInput = document.getElementById('search-input').value.toLowerCase();
                const sortValue = document.getElementById('sort-select').value;
                const noResultsEl = document.getElementById('no-results');
                
                this.posts = await this.fetchPosts();

                // 1. Filtering
                let filteredPosts = this.posts.filter(post => {
                    const searchMatch = !searchInput ||
                        post.title.toLowerCase().includes(searchInput) ||
                        (post.content || '').toLowerCase().includes(searchInput) ||
                        post.tags.some(tag => tag.toLowerCase().includes(searchInput));
                    return searchMatch;
                });

                // 2. Sorting
                filteredPosts.sort((a, b) => {
                    const dateA = new Date(a.created_at);
                    const dateB = new Date(b.created_at);
                    if (sortValue === 'date-desc') return dateB - dateA;
                    if (sortValue === 'date-asc') return dateA - dateB;
                    if (sortValue === 'title-asc') return a.title.localeCompare(b.title);
                    return 0;
                });

                document.getElementById('loading-message').style.display = 'none';

                if (filteredPosts.length === 0) {
                    postsListEl.innerHTML = '';
                    noResultsEl.style.display = 'block';
                } else {
                    noResultsEl.style.display = 'none';
                    postsListEl.innerHTML = filteredPosts.map(post => this.createPostCard(post)).join('');
                }

                this.updateStats(this.posts);
                this.updateChart(this.posts);
                // Re-render lucide icons after injecting HTML
                lucide.createIcons();
            }

            createPostCard(post) {
                const date = this.formatDate(post.created_at);
                const tagElements = post.tags.map(tag => `<span class="tag bg-gray-100 text-gray-700 hover:bg-gray-200" onclick="platform.filterByTag('${tag}')">${tag}</span>`).join('');
                const snippet = (post.content || '').substring(0, 150) + (post.content.length > 150 ? '...' : '');

                return `
                    <div class="card p-6 flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0 border-l-4 border-blue-400">
                        <div class="flex-grow">
                            <h3 class="text-xl font-bold text-gray-900 mb-2">${post.title}</h3>
                            <p class="text-gray-600 text-sm mb-3">${snippet}</p>
                            <div class="flex flex-wrap items-center mt-2">
                                ${tagElements}
                            </div>
                        </div>
                        <div class="flex-shrink-0 flex flex-col items-start md:items-end space-y-3">
                            <p class="text-xs text-gray-500">Created: ${date}</p>
                            <div class="flex space-x-2">
                                <button onclick="platform.openEditModal(${post.id})"
                                        class="p-2 text-blue-600 hover:bg-blue-100 rounded-full transition" title="Edit">
                                    <i data-lucide="square-pen" class="w-5 h-5"></i>
                                </button>
                                <button onclick="platform.deletePost(${post.id})"
                                        class="p-2 text-red-600 hover:bg-red-100 rounded-full transition" title="Delete">
                                    <i data-lucide="trash-2" class="w-5 h-5"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }

            // --- Modal and Form Logic ---

            openAddModal() {
                this.currentEditId = null;
                document.getElementById('modal-title').textContent = 'Add New Post';
                document.getElementById('post-form').reset();
                document.getElementById('post-id').value = '';
                document.getElementById('save-post-btn').textContent = 'Save Post';
                this.showModal();
            }

            openEditModal(id) {
                const post = this.posts.find(p => p.id === id);
                if (!post) {
                    this.showNotification('Post not found.', 'error');
                    return;
                }

                this.currentEditId = id;
                document.getElementById('modal-title').textContent = 'Edit Post';
                document.getElementById('post-id').value = post.id;
                document.getElementById('post-title').value = post.title;
                document.getElementById('post-content').value = post.content;
                document.getElementById('post-tags').value = post.tags.join(', ');
                document.getElementById('save-post-btn').textContent = 'Update Post';
                this.showModal();
            }

            showModal() {
                const modal = document.getElementById('post-modal');
                modal.classList.remove('hidden');
                anime({
                    targets: modal,
                    opacity: [0, 1],
                    duration: 200,
                    easing: 'linear',
                    complete: () => {
                        anime({
                            targets: '.modal > .card',
                            translateY: [20, 0],
                            scale: [0.95, 1],
                            duration: 300,
                            easing: 'easeOutQuad'
                        });
                    }
                });
            }

            closeModal() {
                const modal = document.getElementById('post-modal');
                anime({
                    targets: '.modal > .card',
                    translateY: [0, 20],
                    scale: [1, 0.95],
                    duration: 300,
                    easing: 'easeInQuad',
                    complete: () => {
                        anime({
                            targets: modal,
                            opacity: [1, 0],
                            duration: 200,
                            easing: 'linear',
                            complete: () => modal.classList.add('hidden')
                        });
                    }
                });
            }

            setupEventListeners() {
                document.getElementById('post-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleFormSubmit();
                });
            }

            handleFormSubmit() {
                const id = document.getElementById('post-id').value;
                const title = document.getElementById('post-title').value.trim();
                const content = document.getElementById('post-content').value.trim();
                const tagsInput = document.getElementById('post-tags').value.trim();

                if (!title || !content) {
                    this.showNotification("Title and Content are required fields.", 'error');
                    return;
                }

                // Prepare data for Supabase (store tags as a comma-separated string)
                const data = {
                    title: title,
                    content: content,
                    tags: tagsInput,
                    created_at: new Date().toISOString()
                };

                if (id) {
                    this.updatePost(parseInt(id), data);
                } else {
                    this.createPost(data);
                }
            }

            // --- Filter and Search Logic ---

            filterPosts() {
                // Rerender posts based on current search input and sort value
                this.renderPosts();

                const searchInput = document.getElementById('search-input').value.trim();
                const clearBtn = document.getElementById('clear-filters-btn');
                clearBtn.disabled = searchInput === '';
            }

            filterByTag(tag) {
                const searchInput = document.getElementById('search-input');
                searchInput.value = tag;
                this.filterPosts();
            }

            clearFilters() {
                document.getElementById('search-input').value = '';
                document.getElementById('sort-select').value = 'date-desc';
                this.filterPosts();
            }

            // --- Helper Functions and Utilities ---

            formatDate(dateString) {
                if (!dateString) return 'N/A';
                const options = { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' };
                return new Date(dateString).toLocaleDateString('en-US', options);
            }

            getWordCount(text) {
                return (text || '').trim().split(/\s+/).filter(word => word.length > 0).length;
            }

            updateStats(posts) {
                const totalPosts = posts.length;
                let totalWords = 0;
                let allTags = new Set();
                let draftCount = 0; // Assuming all posts retrieved are 'published' for simplicity

                posts.forEach(post => {
                    totalWords += post.wordCount;
                    post.tags.forEach(tag => allTags.add(tag.toLowerCase()));
                });

                const avgWords = totalPosts > 0 ? Math.round(totalWords / totalPosts) : 0;
                const uniqueTags = allTags.size;

                document.getElementById('stat-total-posts').textContent = totalPosts;
                document.getElementById('stat-avg-words').textContent = avgWords;
                document.getElementById('stat-unique-tags').textContent = uniqueTags;
                document.getElementById('stat-drafts').textContent = draftCount; // Placeholder
            }

            updateChart(posts) {
                const tagCounts = {};
                posts.forEach(post => {
                    post.tags.forEach(tag => {
                        const t = tag.trim();
                        tagCounts[t] = (tagCounts[t] || 0) + 1;
                    });
                });

                const chartData = Object.keys(tagCounts).map(tag => ({
                    value: tagCounts[tag],
                    name: tag
                })).sort((a, b) => b.value - a.value).slice(0, 10); // Top 10 tags

                const chartDom = document.getElementById('tag-chart');
                const tagChart = echarts.init(chartDom);

                const option = {
                    tooltip: { trigger: 'item' },
                    legend: {
                        type: 'scroll',
                        orient: 'vertical',
                        right: 10,
                        top: 20,
                        bottom: 20,
                    },
                    series: [
                        {
                            name: 'Tag Usage',
                            type: 'pie',
                            radius: ['40%', '70%'],
                            center: ['40%', '50%'],
                            avoidLabelOverlap: false,
                            itemStyle: {
                                borderRadius: 10,
                                borderColor: '#fff',
                                borderWidth: 2
                            },
                            label: { show: false, position: 'center' },
                            emphasis: { label: { show: true, fontSize: 20, fontWeight: 'bold' } },
                            labelLine: { show: false },
                            data: chartData
                        }
                    ],
                    color: ['#0d6efd', '#28a745', '#ffc107', '#dc3545', '#6f42c1', '#17a2b8', '#fd7e14', '#e83e8c', '#6c757d', '#007bff']
                };

                tagChart.setOption(option);
            }

            showNotification(message, type = 'info') {
                const container = document.getElementById('notification-container');
                const notification = document.createElement('div');

                notification.className = `px-6 py-3 rounded-lg shadow-lg text-white transform translate-x-full transition-all duration-300 ${
                    type === 'success' ? 'bg-green-500' :
                    type === 'error' ? 'bg-red-500' : 'bg-blue-500'
                }`;
                notification.textContent = message;

                container.appendChild(notification);

                // Animate notification in
                setTimeout(() => {
                    notification.classList.remove('translate-x-full');
                    notification.classList.add('translate-x-0');
                }, 10);

                // Remove notification after 4 seconds
                setTimeout(() => {
                    notification.classList.remove('translate-x-0');
                    notification.classList.add('translate-x-full');
                    setTimeout(() => notification.remove(), 300); // Wait for transition out
                }, 4000);
            }

            logout() {
                // In a full Supabase app, this would handle session termination.
                // For this example, we'll keep the dashboard visible but log a message.
                this.showNotification('Logged out simulated.', 'info');
            }
        }

        // Global functions for HTML onclick handlers
        function openAddModal() { platform.openAddModal(); }
        function closeModal() { platform.closeModal(); }
        function clearFilters() { platform.clearFilters(); }

        // Initialize platform when DOM is loaded
        let platform;
        document.addEventListener('DOMContentLoaded', () => {
            // Check if icons are ready before initialization
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
            platform = new BSSPlusPlatform();
        });
    </script>
</body>
</html>

